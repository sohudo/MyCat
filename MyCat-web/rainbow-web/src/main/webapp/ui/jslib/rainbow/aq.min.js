var symbol_data=[{text:"等于",value:"="},{text:"不等于",value:"<>"},{text:"小于",value:"<"},{text:"小于等于",value:"<="},{text:"大于",value:">"},{text:"大于等于",value:">="},{text:"为空",value:"is null"},{text:"全模糊",value:"like"},{text:"左模糊",value:"left_like"},{text:"右模糊",value:"right_like"},{text:"之间",value:"bt"}],combobox_symbol_data=[{text:"等于",value:"="}],dateBox_symbol_data=[{text:"等于",value:"="},{text:"小于",value:"<"},{text:"小于等于",value:"<="},{text:"大于",value:">"},{text:"之间",value:"bt"}];var tag_aq_remove=function(a){var b=$(a).parent().parent();if(b.parent().children().length>1){b.remove()}};var tag_aq_fieldName_value=function(a,h,f){var c=a.valueType;if(c==null){c="text"}$("#"+h+"_field_valueType"+f).val(c);tag_aq_initValue(h,f,c,null);switch(c){case"baseCombobox":var e=a.valueCode;if(e){$("#"+h+"_fieldValue"+f).combobox({url:"./dispatcherAction/comboxCode.do?code="+e,id:f,panelWidth:294,panelHeight:"auto",valueField:"value",textField:"text"})}break;case"bizCombobox":$("#"+h+"_fieldValue"+f).combogrid({id:f,panelWidth:350,panelHeight:340,idField:a.bizComboxId,fitColumns:true,textField:a.bizComboxText,pagination:true,mode:"remote",url:"./dispatcherAction/query.do?service="+a.valueService+"&method="+a.valueMethod,columns:$.parseJSON(a.bizColumns)});break;case"dateBox":$("#"+h+"valueData_"+f).html("<span id='"+h+"_span"+f+"'><input id='"+h+"_btValue"+f+"' name='value'  type=\"hidden\"/> <input id='"+h+"_fieldValue"+f+"' style='width: 139px;' /><font style=\"font-weight:900;\">至</font><input id='"+h+"_endValue"+f+"' style='width: 139px;' /></span>");$("#"+h+"_fieldValue"+f).datetimebox();$("#"+h+"_endValue"+f).datetimebox();$("#"+h+"_endValue"+f).datetimebox({onChange:function(j,i){$("#"+h+"_btValue"+f).val($("#"+h+"_fieldValue"+f).datetimebox("getValue")+";"+j)}});$("#"+h+"_symbol_combobox"+f).combobox("loadData",dateBox_symbol_data);$("#"+h+"_symbol_combobox"+f).combobox("setValue","bt");var b=getNow();var d=b+" 00:00:00";$("#"+h+"_fieldValue"+f).datetimebox("setValue",d);var g=b+" 23:59:59";$("#"+h+"_endValue"+f).datetimebox("setValue",g);break;default:$("#"+h+"_symbol_combobox"+f).combobox("loadData",symbol_data);break}};var tag_aq_add=function(a,d,c,b){$("#"+a+" tbody>tr:last").after('<tr><td align="center" width="25%"><input id="'+d+"_field_valueType"+c+'" name="valueType" type="hidden"/><input name="field" id="'+d+"_field_combobox"+c+'" style="width: 150px;"/></td><td align="center" width="17%"><input name="symbol" id="'+d+"_symbol_combobox"+c+'" style="width: 80px;" /></td><td align="center" width="50%" id="'+d+"valueData_"+c+'"><span id="'+d+"_span"+c+'"><input name="value" id="'+d+"_fieldValue"+c+'" style="width: 290px;" /></span></td><td align="center" width="8%"><a href="javascript:void(0);"  id="'+d+"_removeButton"+c+'" onclick="tag_aq_remove(this)"></a></td></tr>');tag_aq_createCombobox(d+"_field_combobox",d,c,140,"code","describe",null,b,tag_aq_fieldName_value);tag_aq_createCombobox(d+"_symbol_combobox",d,c,80,"value","text","=",symbol_data,tag_aq_symbol_value);$("#"+d+"_removeButton"+c).linkbutton({iconCls:"icon-remove",plain:true})};var tag_aq_symbol_value=function(a,d,b){var c=a.value;var e=$("#"+d+"_field_valueType"+b).val();if(e=="baseCombobox"||e=="bizCombobox"){return}tag_aq_initValue(d,b,null,c);if(c=="is null"){$("#"+d+"_fieldValue"+b).attr("readOnly","readOnly")}else{$("#"+d+"_fieldValue"+b).removeAttr("readOnly")}};var tag_aq_createCombobox=function(c,f,d,a,h,b,i,e,g){$("#"+c+d).combobox({id:d,name:f,panelWidth:a,panelHeight:"auto",valueField:h,textField:b,value:i,data:e,onSelect:g})};var tag_aq_initValue=function(f,c,g,d){$("#"+f+"_span"+c).remove();if(!g){g=$("#"+f+"_field_valueType"+c).val()}if(!d){d=$("#"+f+"_symbol_combobox"+c).combobox("getValue")}if(g=="baseCombobox"||g=="bizCombobox"){$("#"+f+"valueData_"+c).html("<span id='"+f+"_span"+c+"'><input id='"+f+"_fieldValue"+c+"' name='value' style='width: 290px;' /></span>");$("#"+f+"_symbol_combobox"+c).combobox("loadData",combobox_symbol_data);$("#"+f+"_symbol_combobox"+c).combobox("setValue","=")}else{if(d=="bt"){if(g=="dateBox"){$("#"+f+"valueData_"+c).html("<span id='"+f+"_span"+c+"'><input id='"+f+"_btValue"+c+"' name='value'  type=\"hidden\"/> <input id='"+f+"_fieldValue"+c+"' style='width: 139px;' /><font style=\"font-weight:900;\">至</font><input id='"+f+"_endValue"+c+"' style='width: 139px;' /></span>");$("#"+f+"_fieldValue"+c).datetimebox();$("#"+f+"_endValue"+c).datetimebox();$("#"+f+"_endValue"+c).datetimebox({onChange:function(i,h){$("#"+f+"_btValue"+c).val($("#"+f+"_fieldValue"+c).datetimebox("getValue")+";"+i)}});$("#"+f+"_symbol_combobox"+c).combobox("loadData",dateBox_symbol_data);$("#"+f+"_symbol_combobox"+c).combobox("setValue","bt");var a=getNow();var b=a+" 00:00:00";$("#"+f+"_fieldValue"+c).datetimebox("setValue",b);var e=a+" 23:59:59";$("#"+f+"_endValue"+c).datetimebox("setValue",e)}else{$("#"+f+"valueData_"+c).html("<span id='"+f+"_span"+c+"'><input id='"+f+"_btValue"+c+"' name='value'  type=\"hidden\"/> <input id='"+f+"_fieldValue"+c+"' style='width: 139px;' /><font style=\"font-weight:900;\">至</font><input id='"+f+"_endValue"+c+"' style='width: 139px;' /></span>");$("#"+f+"_endValue"+c).blur(function(){$("#"+f+"_btValue"+c).val($("#"+f+"_fieldValue"+c).val()+";"+$("#"+f+"_endValue"+c).val())})}}else{if(g=="dateBox"){$("#"+f+"valueData_"+c).html("<span id='"+f+"_span"+c+"'><input id='"+f+"_fieldValue"+c+"' name='value' style='width: 290px;' /></span>");$("#"+f+"_fieldValue"+c).datetimebox()}else{$("#"+f+"valueData_"+c).html("<span id='"+f+"_span"+c+"'><input id='"+f+"_fieldValue"+c+"' name='value' style='width: 290px;' /></span>")}}}return d};var tag_aq_ddlSreach=function(g,a,f,e,h,b){if(f){h=f}if($("#"+a).length==0){return}if(e){if(e.length==0){$.messager.show({title:"温馨提示",msg:"该页面没有配置高级查询!"})}else{var d="./page/common/aq.jsp?whereName="+g;var c=[{text:"查询",iconCls:"icon-search",handler:function(){var i=serializeObject($("#"+g+"_queryForm"));if(!i){i={}}i.dbname=$("#"+b).val();$("#"+a).datagrid("load",i)}},{text:"清除",iconCls:"icon-clear",handler:function(){$("#"+g+"_dialog").dialog("refresh",d);tag_aq_reload("#"+a,dbname)}},{text:"查询&关闭",iconCls:"icon-search",handler:function(){var i=serializeObject($("#"+g+"_queryForm"));if(!i){i={}}i.dbname=$("#"+b).val();$("#"+a).datagrid("load",i);$("#"+g+"_dialog").dialog({onClose:function(){}});$("#"+g+"_dialog").dialog("close")}},{text:"关闭",iconCls:"icon-cancel",handler:function(){$("#"+g+"_dialog").dialog({onClose:function(){}});$("#"+g+"_dialog").dialog("close")}}];if($("#"+g+"_dialog").length>0){$("#"+g+"_dialog").dialog("open")}else{rainbowDialog.openDialog(g+"_dialog",d,c,650,280,false,'<font color="red">'+h+"</font>-高级查询       按住当前位置可拖动",g+"_queryForm",null);$("#"+g+"_dialog").dialog("move",{top:220})}}}};var tag_aq_reload=function(a,b){$(a).datagrid("clearSelections");$(a).datagrid("reload",{dbname:b})};var getNow=function(){var d=navigator.userAgent.toLowerCase();var a=/chrome/.test(d);var b=new Date();var c=b.getYear();if($.browser.mozilla||a){c+=1900}return c+"-"+(b.getMonth()+1)+"-"+b.getDate()};
